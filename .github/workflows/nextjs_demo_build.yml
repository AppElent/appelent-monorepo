name: NextJS App Demo Build

on:
  workflow_dispatch:
    
  push:
    branches:
      - main
    paths:
    - frontend/react/devias-kit-pro-v600-custom/** 

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}

jobs:
  build:
    uses: ./.github/workflows/_docker_build.yml
    with:
      working_dir: ./frontend/react/devias-kit-pro-v600-custom
      repository_name: demo
    secrets: inherit

  deploy:
    uses: ./.github/workflows/nextjs_demo_deploy.yml
    needs: [build]
    with:
      environment: development
      image_tag: latest
    secrets: inherit
